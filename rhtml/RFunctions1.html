<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tatsuki Koyama</title>
    <link rel="stylesheet" href="../assets/css/Feb2025.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;700&display=swap" rel="stylesheet">
<!-- Highlight.js CSS (Choose a theme) -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/idea.min.css">
<!-- Highlight.js Library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/r.min.js"></script>
<!-- Initialize Highlight.js -->
<script>hljs.highlightAll();</script>

    <script>
        function toggleVisibility(id) {
            var element = document.getElementById(id);
            if (element.style.display === "none") {
                element.style.display = "block";
            } else {
                element.style.display = "none";
            }
        }
    </script>
</head>
<!-- ------ --> 
<!--        --> 
<!-- ------ --> 
<body>
    <div class="container-box">
    <div class="navbar"> 
        <nav>
        <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="../rhtml/RFunctions1.html"><img src="../assets/images/Rlogo.svg" alt="R Logo" width="20"> files</a></li>
        <li><a href="../teaching.html">Teaching</a></li>
        <li><a href="../cv.html">CV</a></li>
        </ul>
        </nav>
    </div>
<!-- ------ --> 
<main>
    <aside class="sidebar">
        <img src="../assets/images/tatsuki-koyama.png" alt="Tatsuki Koyama" class="profile-pic">
        <h2>Tatsuki Koyama</h2>
        <p>Department of Biostatistics<br><a href="https://vanderbilt.edu">Vanderbilt University</a><br><a href="https://www.vumc.org/main/home">Medical Center</a></p>
        <p>Nashville, TN</p>
            <ul class="social-links"> 
            <li><a href="mailto:tatsuki.koyama@vumc.org"><i class="fa-solid fa-envelope"></i> Email</a></li>
            <li><a href="https://scholar.google.com/citations?user=BEg13Y0AAAAJ&hl=en"><i class="fa-solid fa-graduation-cap"></i> Google Scholar</a></li>
            <li><a href="https://www.athlinks.com/athletes/155884025"><i class="fa fa-link"></i> Athlinks</a></li>
            </ul>
    </aside>
<!-- ------ --> 
<!--        --> 
<!-- ------ --> 
<section class="content">
<h1>R Functions</h1>
    <div class="r-functions-links" style="display: flex; justify-content: space-around; margin-bottom: 20px;">
    <a href="RFunctions1.html">R Functions 1</a>
    <a href="RFunctions2.html">R Functions 2</a>
    <a href="TwoStage2025.html">Two-stage Designs</a>
    </div>
<!--        --> 
<div class="r-functions-list">
<h2>Custom Figures</h2>
<p><a href="https://github.com/tk-koyama/rFunctions/blob/main/RFunctions1.R" target="_blank"> Download RFunctions1.R (GitHub) </a> </p>
<ul>
<!-- ------ --> 
<!-- tplot -->
<!--        --> 
<!-- ------ --> 
<li>
<button onclick="toggleVisibility('tplot-details')">tplot</button>
<div id="tplot-details" style="display: none;">
<p><strong>tplot()</strong> is an alternative to <strong>boxplot()</strong>. It allows individual data points to be displayed, either in the foreground or background, with jittering if necessary.</p>
<!--        -->
<h3>Example</h3>
This example demonstrates the various options available in <strong>tplot()</strong>. While this particular example is not the most effective way to visualize these data -due to unnecessary variation in color and point type- it highlights the function's customization features.
<ul>
    <li><cod>col</cod> and <cod>pch</cod> can be specified at either the individual or group level. In this example, <cod>col</cod> is set at the individual level, while <cod>pch</cod> is assigned at the group level, though this pch variation is unnecessary.</li>
    <li>The <cod>type</cod> argument controls the plot style: <strong>b</strong> (box only), <strong>d</strong> (dots only), <strong>bd</strong> (box in front of dots), and <strong>db</strong> (dots in front of the box).</li>
    <li>Points that are closer than <cod>dist</cod> are jittered by <cod>dist</cod>. <small>This implementation may be incorrect. -try different values to see its impact.</small></li>
    <li>Box colors and borders are controlled by the <cod>boxcol</cod> and <cod>boxborder</cod> arguments.</li>
    <li>The <cod>boxplot.pars</cod> argument is passed directly to <cod>boxplot()</cod>, allowing further customization.</li>
    </ul>
<!--        -->
<h3>R Code</h3>
<!--        -->
<pre><code class="language-r">
set.seed(100)
y <- rnorm(80, 26, 9)
sex <- factor(sample(c('Female', 'Male'), 80, TRUE))
group <- paste('Group ', sample(1:4, 40, prob = c(2,5,4,1), replace = TRUE), sep='')

d <- data.frame(y, sex, group)
        rm(y,sex,group)

tplot(y ~ group, data=d, ylim=c(0,50),
    las=1, cex=1, cex.axis=1, bty='L',
    show.n=TRUE, dist=0.5, jit=0.07, type=c('b','bd','db','d'),
    group.pch=TRUE, pch=c(15,17,20,19),
    group.col=FALSE, col=c('orange','darkgreen')[c(sex)], 
    boxcol=c('dodgerblue','magenta', 'lightgrey', 'pink'), 
    boxborder=grey(0.2),
    boxplot.pars=list(notch=TRUE, boxwex=0.5)
)
</code></pre>
<!--        -->
<img src="../assets/images/tplot1.png" alt="tplot example", width="80%">
</div>
</li>
<!-- ------ -->
<!-- kmplot -->
<!--        -->
<!-- ------ -->
<li><button onclick="toggleVisibility('kmplot-details')">kmplot</button>
<div id="kmplot-details" style="display: none;">
<p><strong>kmplot()</strong> draws a Kaplan-Meier curve. </p>
<!--        -->
<h3>Example</h3>
This example demonstrates the available options in <strong>kmplot()</strong>.
<ul>
    <li>The <cod>xaxis.at</cod> argument allows you to specify the time points at which the number at risk is displayed.</li>
    <li><cod>lty</cod>, <cod>col</cod>, and <cod>lwd</cod> can be set individually for each survival and confidence interval line.</li>
    <li>The <cod>group.names</cod> argument can be used to label groups.</li>
    <li>The order of groups in the "n risk at" table can be adjusted using <cod>group.order</cod>, <small>so the order roughly matches the appearance of the lines.</small></li>
    <li>Setting <cod>simple = TRUE</cod> suppresses the "n risk at" table.</li>
    <li>The "n risk at" numbers are right-justified but visually centered. <small>This was the original motivation for creating this function.</small>
</ul>
<!--        --> 
<h3>R Code</h3>
<pre><code class="language-r">
require(survival)

kma <- survfit( Surv(time, status) ~ rx + adhere, data=colon )
kmplot(kma, mark='', simple=FALSE,
    xaxis.at=c(0, 0.5, 1:9)*365, xaxis.lab=c(0, 0.5, 1:9), # n.risk.at
    lty.surv=c(1,2), lwd.surv=1, col.surv=c(1,1,2,2,4,4), # survival.curves
    col.ci=0, # confidence intervals not plotted
    group.names=c('Obs ','Obs tumor adh','Lev','Lev tumor adh','Lev+5FU ','Lev+5FU tumor adh'), # Change group names
    group.order=c(5,3,1,6,4,2), # order of appearance in the n.risk.at table and legend.
    extra.left.margin=6, label.n.at.risk=FALSE, draw.lines=TRUE,
    cex.axis=.8, xlab='Years', ylab='Survival Probability', # labels
    grid=TRUE, lty.grid=1, lwd.grid=1, col.grid='bisque',
    legend=TRUE, loc.legend='bottomleft',
    cex.lab=0.8, xaxs='r', bty='L', las=1, tcl=-0.2 # other parameters passed to plot()
)
title(main='Chemotherapy for stage B/C colon cancer', adj=.1, font.main=1, line=0.5, cex.main=1)
</code></pre>
<img src="../assets/images/kmplot1.png" alt="kmplot example", width="95%">
</div>
</li>
<!-- ------ --> 
<!-- jmplot --> 
<!-- ------ --> 
<li><button onclick="toggleVisibility('jmplot-details')">jmplot</button>
<div id="jmplot-details" style="display: none;">
    <strong>jmplot()</strong> plots the joint distribution along with marginal distributions on each margin. The parameters <cod>dist</cod> (which controls jitter) and <cod>jit</cod> (which sets the jitter amount) are currently swapped for unknown reasons. <small>I'll fix it someday. In the meantime, ggplot2 has this <a href="https://stackoverflow.com/questions/8545035/scatterplot-with-marginal-histograms-in-ggplot2">covered</a>. </small>
    <!--        -->
<h3>Example</h3>
<pre><code class="language-r">
set.seed(1220)

x <- rexp(100)
y <- rexp(100)
levels <- as.factor(sample(c("Male","Female"), 100, TRUE))
co <- c('brown','royalblue')[as.numeric(levels)]

jmplot(x, y, levels, col=co, pch=19, main='Title', show.n=TRUE)
</code></pre>

<img src="../assets/images/jmplot1.png" alt="jmplot example", width="80%">
</div>
</li>
<!-- ------ --> 
<!-- dsplot --> 
<!-- ------ --> 
<li><button onclick="toggleVisibility('dsplot-details')">dsplot</button>
<div id="dsplot-details" style="display: none;">
    <p>(Discrete scatter plot) The idea was to show continuous data with lots of ties effectively. <small>This is no longer being developed. Use jitter() function carefully.</small></p>
<!--        -->
<!-- <h3>Example</h3>
<p>This example demonstrates the available options in <strong>...</strong>.</p>
<ul>
<li>one</li>
<li>two</li>
<li>three</li>
</ul>
-->
<!--        --> 
<!-- <h3>R Code</h3>
<pre><code class="language-r">
x <- 3
</code></pre>
<img src="../assets/images/tplot1.png" alt="tplot example", width="80%">
</div>
</li>
-->
<!-- ------ --> 
<!-- show.colors --> 
<!-- ------ --> 
<li><button onclick="toggleVisibility('show.colors-details')">show.colors</button>
<div id="show.colors-details" style="display: none;">
    <strong>show.colors()</strong> shows all 657 named colors in R. You can select a color and display its name by running <cod>colors()[n]</cod>.
<!--        -->
<h3>Example</h3>
<!--        --> 
<pre><code class="language-r">
show.colors()
</code></pre>
<img src="../assets/images/showColors1.png" alt="show.colors()", width="80%">
<pre><code class="language-r">
> colors()[139]
[1] "forestgreen"
</code></pre>
</div>
</li>
<!--        -->
<!--        -->
<!--        -->
</section>
</main>
</div> <!-- End of container-box -->
</body>
</html>
